<!DOCTYPE html>
<html>
<head>
  <title>Gamiq Admin</title>
  <style>
    body {
      font-family: Arial;
      background: linear-gradient(120deg,#7c3aed,#ec4899,#22d3ee);
      color: white;
    }

    .box {
      max-width: 800px;
      margin: 30px auto;
      background: rgba(0,0,0,0.6);
      padding: 25px;
      border-radius: 20px;
    }

    .game {
      background: rgba(255,255,255,0.1);
      padding: 15px;
      border-radius: 15px;
      margin-bottom: 15px;
    }

    button {
      margin-top: 10px;
      margin-right: 10px;
      padding: 6px 12px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }

    .approve { background: #22c55e; color: white; }
    .reject { background: #ef4444; color: white; }
    .remove { background: #f97316; color: white; }
  </style>
</head>
<body>

<div class="box">
  <h2>Pending Games</h2>
  <div id="pending"></div>
</div>

<div class="box">
  <h2>Live Games</h2>
  <div id="live"></div>
</div>

<script>
if (localStorage.getItem("currentUser") !== "admin")
  location.href = "index.html";

const games = JSON.parse(localStorage.getItem("games") || "{}");
const pending = document.getElementById("pending");
const live = document.getElementById("live");

for (const id in games) {
  const g = games[id];
  const div = document.createElement("div");
  div.className = "game";
  div.innerHTML = `<b>${g.name}</b><br>${g.creator}`;

  if (g.status === "pending") {
    div.innerHTML += `
      <br>
      <button class="approve" onclick="approve('${id}')">Approve</button>
      <button class="reject" onclick="remove('${id}')">Reject</button>
    `;
    pending.appendChild(div);
  }

  if (g.status === "approved") {
    div.innerHTML += `
      <br>
      <button class="remove" onclick="unpublish('${id}')">Take Down</button>
    `;
    live.appendChild(div);
  }
}

function approve(id) {
  games[id].status = "approved";
  save();
}

function unpublish(id) {
  games[id].status = "pending";
  save();
}

function remove(id) {
  delete games[id];
  save();
}

function save() {
  localStorage.setItem("games", JSON.stringify(games));
  location.reload();
}
</script>

</body>
</html>
